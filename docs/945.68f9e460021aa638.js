"use strict";(self.webpackChunkE_commerce_Project=self.webpackChunkE_commerce_Project||[]).push([[945],{1945:(Q,a,i)=>{i.r(a),i.d(a,{ForgetPasswordComponent:()=>Y});var c=i(6814),n=i(95),e=i(4769),u=i(2333),m=i(9862);let p=(()=>{class r{constructor(t){this._HttpClient=t}forgetpassword(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/forgotPasswords",t)}resetCode(t){return this._HttpClient.post("https://ecommerce.routemisr.com/api/v1/auth/verifyResetCode",{resetCode:t})}resetPassword(t,o){return this._HttpClient.put("https://ecommerce.routemisr.com/api/v1/auth/resetPassword",{email:t,newPassword:o})}static#e=this.\u0275fac=function(o){return new(o||r)(e.LFG(m.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var _=i(1120);function g(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Email Is Required "),e.qZA())}function d(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Email Is Invalid "),e.qZA())}function f(r,l){if(1&r&&(e.TgZ(0,"div",8),e.YNc(1,g,2,0,"p",9),e.YNc(2,d,2,0,"p",9),e.qZA()),2&r){const t=e.oxw(2);let o,s;e.xp6(1),e.Q6J("ngIf",null==(o=t.forgetForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.forgetForm.get("email"))?null:s.getError("email"))}}function w(r,l){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userMsg," ")}}function h(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"section",1)(1,"h2",2),e._uU(2,"please enter your verification code"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.forgetPassword())}),e.TgZ(4,"div"),e._UZ(5,"input",4),e.YNc(6,f,3,2,"div",5),e.TgZ(7,"button",6),e._uU(8,"Verify"),e.qZA(),e.YNc(9,w,2,1,"p",7),e.qZA()()()}if(2&r){const t=e.oxw();let o;e.xp6(3),e.Q6J("formGroup",t.forgetForm),e.xp6(3),e.Q6J("ngIf",((null==(o=t.forgetForm.get("email"))?null:o.touched)||(null==(o=t.forgetForm.get("email"))||null==o.value?null:o.value.length)>0)&&(null==(o=t.forgetForm.get("email"))?null:o.errors)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}function x(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," code Is Required "),e.qZA())}function F(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," code Must At Least 6 Characters "),e.qZA())}function v(r,l){if(1&r&&(e.TgZ(0,"div",8),e.YNc(1,x,2,0,"p",9),e.YNc(2,F,2,0,"p",9),e.qZA()),2&r){const t=e.oxw(2);let o,s;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetCodeForm.get("code"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.resetCodeForm.get("code"))?null:s.getError("pattern"))}}function Z(r,l){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userMsg," ")}}function C(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"section",1)(1,"h2",2),e._uU(2,"reset your account password"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.resetCode())}),e.TgZ(4,"div"),e._UZ(5,"input",11),e.YNc(6,v,3,2,"div",5),e.TgZ(7,"button",6),e._uU(8,"Verify"),e.qZA(),e.YNc(9,Z,2,1,"p",7),e.qZA()()()}if(2&r){const t=e.oxw();let o;e.xp6(3),e.Q6J("formGroup",t.resetCodeForm),e.xp6(3),e.Q6J("ngIf",((null==(o=t.resetCodeForm.get("code"))?null:o.touched)||(null==(o=t.resetCodeForm.get("code"))||null==o.value?null:o.value.length)>0)&&(null==(o=t.resetCodeForm.get("code"))?null:o.errors)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}function P(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Email Is Required "),e.qZA())}function T(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Email Is Invalid "),e.qZA())}function I(r,l){if(1&r&&(e.TgZ(0,"div",8),e.YNc(1,P,2,0,"p",9),e.YNc(2,T,2,0,"p",9),e.qZA()),2&r){const t=e.oxw(2);let o,s;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetPasswordForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.resetPasswordForm.get("email"))?null:s.getError("email"))}}function q(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Password Is Required "),e.qZA())}function N(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1," Password Must At Least 6 Characters "),e.qZA())}function A(r,l){if(1&r&&(e.TgZ(0,"div",8),e.YNc(1,q,2,0,"p",9),e.YNc(2,N,2,0,"p",9),e.qZA()),2&r){const t=e.oxw(2);let o,s;e.xp6(1),e.Q6J("ngIf",null==(o=t.resetPasswordForm.get("password"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(s=t.resetPasswordForm.get("password"))?null:s.getError("pattern"))}}function J(r,l){if(1&r&&(e.TgZ(0,"p",10),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.userMsg," ")}}function U(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"section",1)(1,"h2",2),e._uU(2,"reset your account password"),e.qZA(),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.resetPassword())}),e.TgZ(4,"div"),e._UZ(5,"input",4),e.YNc(6,I,3,2,"div",5),e._UZ(7,"input",12),e.YNc(8,A,3,2,"div",5),e.TgZ(9,"button",6),e._uU(10,"Reset Password"),e.qZA(),e.YNc(11,J,2,1,"p",7),e.qZA()()()}if(2&r){const t=e.oxw();let o,s;e.xp6(3),e.Q6J("formGroup",t.resetPasswordForm),e.xp6(3),e.Q6J("ngIf",((null==(o=t.resetPasswordForm.get("email"))?null:o.touched)||(null==(o=t.resetPasswordForm.get("email"))||null==o.value?null:o.value.length)>0)&&(null==(o=t.resetPasswordForm.get("email"))?null:o.errors)),e.xp6(2),e.Q6J("ngIf",((null==(s=t.resetPasswordForm.get("password"))?null:s.touched)||(null==(s=t.resetPasswordForm.get("password"))||null==s.value?null:s.value.length)>0)&&(null==(s=t.resetPasswordForm.get("password"))?null:s.errors)),e.xp6(3),e.Q6J("ngIf",t.userMsg)}}let Y=(()=>{class r{constructor(t,o,s){this._AuthService=t,this._ForgetpassService=o,this._Router=s,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMsg="",this.forgetForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email])}),this.resetCodeForm=new n.cw({code:new n.NI("",[n.kI.required,n.kI.pattern(/^\w{6,}$/)])}),this.resetPasswordForm=new n.cw({email:new n.NI("",[n.kI.required,n.kI.email]),password:new n.NI("",[n.kI.required,n.kI.pattern(/^\w{6,}$/)])})}forgetPassword(){let t=this.forgetForm.value;this.email=t.email,this._ForgetpassService.forgetpassword(t).subscribe({next:o=>{console.log(o),this.userMsg=o.message,this.step1=!1,this.step2=!0},error:o=>{this.userMsg=o.error.message}})}resetCode(){let t=this.resetCodeForm.value.code;console.log(t),this._ForgetpassService.resetCode(t).subscribe({next:o=>{console.log(o),this.userMsg=o.message,this.step2=!1,this.step3=!0},error:o=>{this.userMsg=o.error.message,console.log(o)}})}resetPassword(){let t=this.resetPasswordForm.value.email,o=this.resetPasswordForm.value.password;console.log(t,o),this._ForgetpassService.resetPassword(t,o).subscribe({next:s=>{console.log(s),this.userMsg=s.message,localStorage.setItem("eToken",s.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:s=>{this.userMsg=s.error.message,console.log(s)}})}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(u.e),e.Y36(p),e.Y36(_.F0))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-forget-password"]],standalone:!0,features:[e.jDz],decls:3,vars:3,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"fw-bold"],[3,"formGroup","ngSubmit"],["type","email","name","","id","","formControlName","email","placeholder","Email...",1,"form-control","my-4"],["class","alert alert-danger my-3",4,"ngIf"],[1,"btn-main"],["class","text-center alert alert-danger w-75 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","my-3"],[4,"ngIf"],[1,"text-center","alert","alert-danger","w-75","mx-auto","p-1","mb-0"],["type","text","name","","id","","formControlName","code","placeholder","Code...",1,"form-control","my-4"],["type","password","name","","id","","formControlName","password","placeholder","Password..",1,"form-control","my-4"]],template:function(o,s){1&o&&(e.YNc(0,h,10,3,"section",0),e.YNc(1,C,10,3,"section",0),e.YNc(2,U,12,4,"section",0)),2&o&&(e.Q6J("ngIf",s.step1),e.xp6(1),e.Q6J("ngIf",s.step2),e.xp6(1),e.Q6J("ngIf",s.step3))},dependencies:[c.ez,c.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return r})()}}]);